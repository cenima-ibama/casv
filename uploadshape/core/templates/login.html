{% load i18n %}

{% if request.user.is_authenticated %}
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a id="btn-logged" class="dropdown-toggle" href="#" data-toggle="dropdown">
          <span class="glyphicon glyphicon-user"></span> {{ request.user.username }} <strong class="caret"></strong>
        </a>
        <ul class="dropdown-menu">
          <li><a href="{% url 'core:logout' %}">{% trans 'Log out' %}</a></li>
        </ul>
      </li>
    </ul>

{% else %}
  <ul class="nav navbar-nav navbar-right">
    <li class="">
      <a id="btn-login" href="#" data-toggle="modal" data-target="#login"><span class="glyphicon glyphicon-user"></span> Login</a>
    </li>
  </ul>
  {% if msg %}
    {{ msg }}
  {% endif %}
  <div class="modal fade" id="login" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">
            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
          </button>
          <h4 class="modal-title">{% trans 'Login' %}</h4>
        </div>
        <div class="modal-body">
          <form action="{% url 'core:login' %}" method="post" role="form">{% csrf_token %}
            {% if next %}
              <input type="hidden" name="next" value="{{ next }}" />
            {% endif %}
            <div class="form-group">
              <label for="username">{% trans 'Username' %}:</label>
              <input type="text" name="username" value="" /><br />
              <label for="password">{% trans 'Password' %}:</label>
              <input type="password" name="password" value="" id="password">
            </div>
            <button type="submit" class="btn btn-default">{% trans 'Login' %}</button>
          </form>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
{% endif %}
